<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Live Score - Events</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f0c29 0%, #24243e 50%, #302b63 100%);
      color: white;
      min-height: 100vh;
    }

    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 25px;
      background: linear-gradient(135deg, #1a1a33 0%, #2a2a50 100%);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 4px 25px rgba(0, 0, 0, 0.3);
    }

    .logo {
      font-weight: bold;
      font-size: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
      color: white;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }
    .logo i { 
      color: #ff0000; 
      font-size: 28px;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-5px); }
      60% { transform: translateY(-3px); }
    }

    .horizontal-nav {
      background: linear-gradient(135deg, #1a1a33 0%, #2a2a50 100%);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 0 25px;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1400px;
      margin: 0 auto;
    }

    .nav-links { display: flex; gap: 2px; }

    .nav-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 15px 20px;
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: all 0.3s ease;
      font-weight: 500;
      position: relative;
    }

    .nav-link:hover { color: white; background: rgba(255, 0, 0, 0.1); }
    .nav-link.active { color: #ff0000; background: rgba(255, 0, 0, 0.15); }
    .nav-link.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: #ff0000;
      border-radius: 2px 2px 0 0;
    }

    .top-icons {
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 22px;
    }

    .upload-btn {
      background: linear-gradient(135deg, #ff0000, #cc0000);
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(255, 0, 0, 0.3);
      font-size: 14px;
    }

    .upload-btn:hover {
      background: linear-gradient(135deg, #cc0000, #aa0000);
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(255, 0, 0, 0.4);
    }

    .top-icons > i {
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 8px;
      border-radius: 50%;
    }
    .top-icons > i:hover {
      color: #ff0000;
      background: rgba(255, 0, 0, 0.1);
      transform: scale(1.2);
    }

    .sign-in-btn {
      padding: 10px 20px;
      border-radius: 25px;
      background: linear-gradient(135deg, #ff0000, #cc0000);
      font-weight: bold;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(255, 0, 0, 0.3);
      font-size: 14px;
      white-space: nowrap;
    }

    .sign-in-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 20px rgba(255, 0, 0, 0.5);
    }

    .events {
      padding: 30px;
      max-width: 1200px;
      margin: auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 30px;
    }

    .event-card {
      background: rgba(255,255,255,0.05);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      transition: all 0.3s ease;
      border: 1px solid rgba(255,255,255,0.08);
    }

    .event-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
      border-color: #ff4757;
    }

    .event-image {
      position: relative;
      height: 200px;
      overflow: hidden;
    }

    .event-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .event-card:hover img { transform: scale(1.05); }

    .live-badge {
      position: absolute;
      top: 15px;
      left: 15px;
      background: #ff4757;
      color: white;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
    }

    .live-badge.upcoming { background: #4CAF50; }
    .live-badge.popular { background: #FF9500; }

    .event-card .content { padding: 20px; }

    .event-card h3 {
      margin: 0 0 15px;
      font-size: 20px;
      font-weight: 700;
      color: #fff;
    }

    .event-details {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 20px;
    }

    .event-detail {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #ccc;
      font-size: 14px;
    }

    .event-detail i { color: #ff4757; width: 16px; }

    .event-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 15px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .btn-ticket {
      background: linear-gradient(135deg, #ff4757, #c92b2b);
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
    }

    .btn-ticket:hover {
      background: linear-gradient(135deg, #c92b2b, #aa0000);
      transform: translateY(-2px);
    }

    .event-icons { display: flex; gap: 10px; }

    .icon-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      background: rgba(255,255,255,0.1);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .icon-btn:hover { background: #ff4757; transform: scale(1.1); }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
      z-index: 2000;
      backdrop-filter: blur(5px);
    }

    .modal.active { display: flex; }

    .upload-modal-content {
      background: linear-gradient(145deg, #3b4a8c, #2d3561);
      padding: 30px;
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      color: #fff;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    .modal-title {
      font-size: 24px;
      font-weight: 700;
      color: #4dabf7;
    }

    .close-btn {
      background: none;
      border: none;
      color: #fff;
      font-size: 24px;
      cursor: pointer;
      padding: 5px;
      border-radius: 50%;
      transition: all 0.3s ease;
      width: 35px;
      height: 35px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-btn:hover {
      background: rgba(255, 71, 87, 0.2);
      color: #ff4757;
    }

    .form-group { margin-bottom: 20px; }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #4dabf7;
      font-size: 16px;
    }

    .form-input, .form-select, textarea.form-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      background: rgba(255,255,255,0.1);
      color: #fff;
      font-size: 14px;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .form-input:focus, .form-select:focus, textarea.form-input:focus {
      outline: none;
      border-color: #4dabf7;
      background: rgba(255,255,255,0.15);
      box-shadow: 0 0 0 3px rgba(77, 171, 247, 0.1);
    }

    .form-input::placeholder { color: rgba(255,255,255,0.6); }
    .form-select option { background: #2d3561; color: #fff; }

    .file-upload-area {
      border: 2px dashed rgba(77, 171, 247, 0.5);
      border-radius: 12px;
      padding: 40px 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: rgba(77, 171, 247, 0.05);
    }

    .file-upload-area:hover {
      border-color: #4dabf7;
      background: rgba(77, 171, 247, 0.1);
    }

    .upload-icon {
      font-size: 48px;
      color: #4dabf7;
      margin-bottom: 15px;
    }

    .upload-text {
      font-size: 16px;
      color: #4dabf7;
      margin-bottom: 5px;
      font-weight: 600;
    }

    .upload-subtext {
      font-size: 12px;
      color: rgba(255,255,255,0.7);
    }

    .file-input { display: none; }

    .selected-file {
      background: rgba(76, 175, 80, 0.2);
      border: 2px solid #4CAF50;
      padding: 20px;
      border-radius: 8px;
      color: #4CAF50;
      text-align: center;
    }

    .modal-actions {
      display: flex;
      gap: 15px;
      justify-content: flex-end;
      margin-top: 30px;
    }

    .btn-secondary {
      background: rgba(255,255,255,0.1);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.2);
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn-secondary:hover { background: rgba(255,255,255,0.2); }

    .btn-primary {
      background: linear-gradient(135deg, #ff4757, #c92b2b);
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(255, 71, 87, 0.3);
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #c92b2b, #aa0000);
      transform: translateY(-1px);
      box-shadow: 0 4px 20px rgba(255, 71, 87, 0.4);
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255,255,255,0.1);
      border-radius: 3px;
      overflow: hidden;
      margin-top: 15px;
      display: none;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4CAF50, #45a049);
      transition: width 0.3s ease;
      width: 0%;
    }

    .upload-status {
      margin-top: 10px;
      font-size: 14px;
      color: #4CAF50;
      display: none;
    }

    .stream-modal-content {
      background: linear-gradient(145deg, #1f1f3f, #2a2a5f);
      padding: 20px;
      border-radius: 15px;
      width: 95%;
      max-width: 1400px;
      color: #fff;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .stream-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .stream-title {
      font-size: 24px;
      font-weight: 700;
      color: #ff4757;
    }

    .live-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #ff4757;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(255, 71, 87, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0); }
    }

    .stream-content-wrapper {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 20px;
      flex: 1;
      overflow: hidden;
    }

    .video-section {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .video-container {
      width: 100%;
      height: 500px;
      background: #000;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .video-placeholder {
      text-align: center;
      color: #666;
    }

    .video-placeholder i {
      font-size: 64px;
      margin-bottom: 15px;
      display: block;
    }

    .stream-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .stream-btn {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stream-btn:hover {
      background: rgba(255, 71, 87, 0.2);
      border-color: #ff4757;
      color: #ff4757;
    }

    .stream-btn.active {
      background: #ff4757;
      border-color: #ff4757;
      color: #fff;
    }

    .stream-info {
      background: rgba(255,255,255,0.05);
      padding: 15px;
      border-radius: 8px;
      font-size: 14px;
      color: #ccc;
    }

    .viewer-count {
      display: flex;
      align-items: center;
      gap: 5px;
      color: #4CAF50;
      font-weight: 600;
    }

    .chat-section {
      display: flex;
      flex-direction: column;
      background: rgba(255,255,255,0.03);
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.1);
      overflow: hidden;
    }

    .chat-header {
      padding: 15px;
      background: rgba(255,255,255,0.05);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chat-header h3 {
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #fff;
    }

    .tip-btn {
      background: linear-gradient(135deg, #FFD700, #FFA500);
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      color: #000;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
    }

    .tip-btn:hover {
      background: linear-gradient(135deg, #FFA500, #FF8C00);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(255, 215, 0, 0.5);
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-height: 0;
    }

    .chat-messages::-webkit-scrollbar { width: 6px; }
    .chat-messages::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
      border-radius: 3px;
    }
    .chat-messages::-webkit-scrollbar-thumb {
      background: rgba(255,71,87,0.5);
      border-radius: 3px;
    }

    .chat-message {
      padding: 10px 12px;
      background: rgba(255,255,255,0.05);
      border-radius: 8px;
      border-left: 3px solid #ff4757;
      animation: slideInChat 0.3s ease;
    }

    @keyframes slideInChat {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .chat-message.tip-message {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 165, 0, 0.1));
      border-left-color: #FFD700;
    }

    .chat-message.system-message {
      background: rgba(76, 175, 80, 0.1);
      border-left-color: #4CAF50;
      text-align: center;
      font-style: italic;
    }

    .chat-username {
      font-weight: 600;
      color: #ff4757;
      font-size: 13px;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .chat-username .badge {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 10px;
      background: rgba(255, 71, 87, 0.3);
      color: #fff;
    }

    .chat-username .tip-badge {
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #000;
      font-weight: 700;
    }

    .chat-text {
      font-size: 13px;
      color: rgba(255,255,255,0.9);
      line-height: 1.4;
      word-wrap: break-word;
    }

    .chat-timestamp {
      font-size: 11px;
      color: rgba(255,255,255,0.5);
      margin-top: 4px;
    }

    .chat-input-wrapper {
      display: flex;
      gap: 10px;
      padding: 15px;
      background: rgba(255,255,255,0.05);
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .chat-input {
      flex: 1;
      padding: 12px 15px;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 25px;
      background: rgba(255,255,255,0.08);
      color: #fff;
      font-size: 13px;
      transition: all 0.3s ease;
    }

    .chat-input:focus {
      outline: none;
      border-color: #ff4757;
      background: rgba(255,255,255,0.12);
    }

    .chat-input::placeholder { color: rgba(255,255,255,0.5); }

    .send-btn {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      border: none;
      background: linear-gradient(135deg, #ff4757, #c92b2b);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(255, 71, 87, 0.3);
    }

    .send-btn:hover {
      background: linear-gradient(135deg, #c92b2b, #aa0000);
      transform: scale(1.1);
      box-shadow: 0 4px 15px rgba(255, 71, 87, 0.5);
    }

    .tip-modal-content {
      background: linear-gradient(145deg, #3b4a8c, #2d3561);
      padding: 30px;
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      color: #fff;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .tip-amounts {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }

    .tip-amount-btn {
      padding: 20px 15px;
      border: 2px solid rgba(255, 215, 0, 0.3);
      border-radius: 12px;
      background: rgba(255, 215, 0, 0.05);
      color: #FFD700;
      font-weight: 700;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    .tip-amount-btn i { font-size: 24px; }

    .tip-amount-btn:hover {
      background: rgba(255, 215, 0, 0.15);
      border-color: #FFD700;
      transform: translateY(-3px);
      box-shadow: 0 5px 20px rgba(255, 215, 0, 0.3);
    }

    .tip-amount-btn.selected {
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #000;
      border-color: #FFD700;
      box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
    }

    .selected-tip {
      background: rgba(76, 175, 80, 0.2);
      border: 2px solid #4CAF50;
      padding: 15px;
      border-radius: 8px;
      color: #4CAF50;
      text-align: center;
      font-weight: 600;
      margin-top: 20px;
      display: none;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #ff4757, #c92b2b);
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      z-index: 3000;
      font-weight: 500;
      transform: translateX(400px);
      transition: transform 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .toast.show { transform: translateX(0); }

    .toast.success { background: linear-gradient(135deg, #4CAF50, #45a049); }
    .toast.error { background: linear-gradient(135deg, #f44336, #d32f2f); }

    @media (max-width: 768px) {
      .events {
        padding: 20px 15px;
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .stream-content-wrapper {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .video-container { height: 250px; }

      .chat-section { max-height: 400px; }

      .tip-amounts {
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <header class="top-bar">
    <div class="logo">
      <i class='bx bx-football'></i> <span>Live Score</span>
    </div>
  </header>

  <nav class="horizontal-nav">
    <div class="nav-container">
      <div class="nav-links">
        <a href="index.html" class="nav-link"><span>Home</span></a>
        <a href="highlights.html" class="nav-link"><span>Highlights</span></a>
        <a href="events.html" class="nav-link active"><span>Events</span></a>
        <a href="players.html" class="nav-link"><span>Players</span></a>
        <a href="sponsors.html" class="nav-link"><span>Sponsors</span></a>
        <a href="search.html" class="nav-link"><span>Search</span></a>
      </div>
      
      <div class="top-icons">
        <button class="upload-btn" onclick="openUploadModal()">
          <i class='bx bx-plus'></i><span>Upload</span>
        </button>
        <i class='bx bx-bell' title="Notifications" onclick="showNotifications()"></i>
        <div class="sign-in-btn" onclick="window.location.href='profile.html'">Sign In</div>
      </div>
    </div>
  </nav>

  <section class="events">
    <div class="event-card">
      <div class="event-image">
        <img src="https://images.unsplash.com/photo-1431324155629-1a6deb1dec8d?w=500" alt="Champions League">
        <div class="live-badge">LIVE</div>
      </div>
      <div class="content">
        <h3>Champions League Final</h3>
        <div class="event-details">
          <div class="event-detail"><i class="fa-solid fa-location-dot"></i><span>Wembley Stadium, London</span></div>
          <div class="event-detail"><i class="fa-solid fa-calendar"></i><span>June 5, 2025</span></div>
          <div class="event-detail"><i class="fa-solid fa-clock"></i><span>20:00 GMT</span></div>
        </div>
        <div class="event-actions">
          <button class="btn-ticket" onclick="buyTicket('Champions League Final')">
            <i class="fa-solid fa-ticket"></i> Buy Ticket
          </button>
          <div class="event-icons">
            <button class="icon-btn" onclick="openLiveStream('Champions League Final')" title="Watch Live">
              <i class="fa-solid fa-play"></i>
            </button>
            <button class="icon-btn" onclick="shareEvent('Champions League Final')" title="Share">
              <i class="fa-solid fa-share"></i>
            </button>
            <button class="icon-btn" onclick="setReminder('Champions League Final')" title="Set Reminder">
              <i class="fa-solid fa-bell"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="event-card">
      <div class="event-image">
        <img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=500" alt="El Clasico">
        <div class="live-badge upcoming">UPCOMING</div>
      </div>
      <div class="content">
        <h3>El Clásico: Barca vs Madrid</h3>
        <div class="event-details">
          <div class="event-detail"><i class="fa-solid fa-location-dot"></i><span>Camp Nou, Barcelona</span></div>
          <div class="event-detail"><i class="fa-solid fa-calendar"></i><span>July 12, 2025</span></div>
          <div class="event-detail"><i class="fa-solid fa-clock"></i><span>19:30 GMT</span></div>
        </div>
        <div class="event-actions">
          <button class="btn-ticket" onclick="buyTicket('El Clásico')">
            <i class="fa-solid fa-ticket"></i> Buy Ticket
          </button>
          <div class="event-icons">
            <button class="icon-btn" onclick="openLiveStream('El Clásico')" title="Watch Live">
              <i class="fa-solid fa-play"></i>
            </button>
            <button class="icon-btn" onclick="shareEvent('El Clásico')" title="Share">
              <i class="fa-solid fa-share"></i>
            </button>
            <button class="icon-btn" onclick="setReminder('El Clásico')" title="Set Reminder">
              <i class="fa-solid fa-bell"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="event-card">
      <div class="event-image">
        <img src="https://images.unsplash.com/photo-1522778119026-d647f0596c20?w=500" alt="Premier League">
        <div class="live-badge upcoming">UPCOMING</div>
      </div>
      <div class="content">
        <h3>Premier League Derby</h3>
        <div class="event-details">
          <div class="event-detail"><i class="fa-solid fa-location-dot"></i><span>Old Trafford, Manchester</span></div>
          <div class="event-detail"><i class="fa-solid fa-calendar"></i><span>August 15, 2025</span></div>
          <div class="event-detail"><i class="fa-solid fa-clock"></i><span>16:30 GMT</span></div>
        </div>
        <div class="event-actions">
          <button class="btn-ticket" onclick="buyTicket('Premier League Derby')">
            <i class="fa-solid fa-ticket"></i> Buy Ticket
          </button>
          <div class="event-icons">
            <button class="icon-btn" onclick="openLiveStream('Premier League Derby')" title="Watch Live">
              <i class="fa-solid fa-play"></i>
            </button>
            <button class="icon-btn" onclick="shareEvent('Premier League Derby')" title="Share">
              <i class="fa-solid fa-share"></i>
            </button>
            <button class="icon-btn" onclick="setReminder('Premier League Derby')" title="Set Reminder">
              <i class="fa-solid fa-bell"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="event-card">
      <div class="event-image">
        <img src="https://images.unsplash.com/photo-1489944440615-453fc2b6a9a9?w=500" alt="Africa Cup">
        <div class="live-badge popular">POPULAR</div>
      </div>
      <div class="content">
        <h3>Africa Cup of Nations Final</h3>
        <div class="event-details">
          <div class="event-detail"><i class="fa-solid fa-location-dot"></i><span>Cairo International Stadium</span></div>
          <div class="event-detail"><i class="fa-solid fa-calendar"></i><span>August 20, 2025</span></div>
          <div class="event-detail"><i class="fa-solid fa-clock"></i><span>18:00 GMT</span></div>
        </div>
        <div class="event-actions">
          <button class="btn-ticket" onclick="buyTicket('Africa Cup Final')">
            <i class="fa-solid fa-ticket"></i> Buy Ticket
          </button>
          <div class="event-icons">
            <button class="icon-btn" onclick="openLiveStream('Africa Cup Final')" title="Watch Live">
              <i class="fa-solid fa-play"></i>
            </button>
            <button class="icon-btn" onclick="shareEvent('Africa Cup Final')" title="Share">
              <i class="fa-solid fa-share"></i>
            </button>
            <button class="icon-btn" onclick="setReminder('Africa Cup Final')" title="Set Reminder">
              <i class="fa-solid fa-bell"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="event-card">
      <div class="event-image">
        <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500" alt="World Cup">
        <div class="live-badge upcoming">UPCOMING</div>
      </div>
      <div class="content">
        <h3>FIFA World Cup Qualifiers</h3>
        <div class="event-details">
          <div class="event-detail"><i class="fa-solid fa-location-dot"></i><span>Various Stadiums</span></div>
          <div class="event-detail"><i class="fa-solid fa-calendar"></i><span>September 10, 2025</span></div>
          <div class="event-detail"><i class="fa-solid fa-clock"></i><span>Multiple Times</span></div>
        </div>
        <div class="event-actions">
          <button class="btn-ticket" onclick="buyTicket('World Cup Qualifiers')">
            <i class="fa-solid fa-ticket"></i> Buy Ticket
          </button>
          <div class="event-icons">
            <button class="icon-btn" onclick="openLiveStream('World Cup Qualifiers')" title="Watch Live">
              <i class="fa-solid fa-play"></i>
            </button>
            <button class="icon-btn" onclick="shareEvent('World Cup Qualifiers')" title="Share">
              <i class="fa-solid fa-share"></i>
            </button>
            <button class="icon-btn" onclick="setReminder('World Cup Qualifiers')" title="Set Reminder">
              <i class="fa-solid fa-bell"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="event-card">
      <div class="event-image">
        <img src="https://images.unsplash.com/photo-1553778263-73a83bab9b0c?w=500" alt="Europa League">
        <div class="live-badge upcoming">UPCOMING</div>
      </div>
      <div class="content">
        <h3>Europa League Semi-Final</h3>
        <div class="event-details">
          <div class="event-detail"><i class="fa-solid fa-location-dot"></i><span>Allianz Arena, Munich</span></div>
          <div class="event-detail"><i class="fa-solid fa-calendar"></i><span>May 18, 2025</span></div>
          <div class="event-detail"><i class="fa-solid fa-clock"></i><span>21:00 GMT</span></div>
        </div>
        <div class="event-actions">
          <button class="btn-ticket" onclick="buyTicket('Europa League Semi-Final')">
            <i class="fa-solid fa-ticket"></i> Buy Ticket
          </button>
          <div class="event-icons">
            <button class="icon-btn" onclick="openLiveStream('Europa League Semi-Final')" title="Watch Live">
              <i class="fa-solid fa-play"></i>
            </button>
            <button class="icon-btn" onclick="shareEvent('Europa League Semi-Final')" title="Share">
              <i class="fa-solid fa-share"></i>
            </button>
            <button class="icon-btn" onclick="setReminder('Europa League Semi-Final')" title="Set Reminder">
              <i class="fa-solid fa-bell"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Upload Modal -->
  <div class="modal" id="uploadModal">
    <div class="upload-modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Upload Video Highlight</h2>
        <button class="close-btn" onclick="closeModal('uploadModal')">×</button>
      </div>
      <form id="uploadForm">
        <div class="form-group">
          <label class="form-label">Video Category</label>
          <select class="form-select" id="videoCategory" required>
            <option value="">Select Category</option>
            <option value="goals">Goals</option>
            <option value="skills">Skills & Tricks</option>
            <option value="matches">Full Matches</option>
            <option value="training">Training</option>
            <option value="celebrations">Celebrations</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Video Title</label>
          <input type="text" class="form-input" id="videoTitle" placeholder="e.g., Amazing Goal by Messi" required>
        </div>
        <div class="form-group">
          <label class="form-label">Upload Video</label>
          <div class="file-upload-area" id="fileUploadArea">
            <div class="upload-icon"><i class="fa-solid fa-video"></i></div>
            <div class="upload-text">Drop your video file here or click to select</div>
            <div class="upload-subtext">MP4, AVI, MOV up to 500MB</div>
            <input type="file" id="videoFileInput" class="file-input" accept="video/*">
          </div>
          <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
          <div class="upload-status" id="uploadStatus"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Teams/Players</label>
          <input type="text" class="form-input" id="videoPlayers" placeholder="e.g., Barcelona, Lionel Messi">
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" onclick="closeModal('uploadModal')">Cancel</button>
          <button type="submit" class="btn-primary" id="uploadBtn">Upload Video</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Live Stream Modal WITH CHAT & TIPPING -->
  <div class="modal" id="streamModal">
    <div class="stream-modal-content">
      <div class="stream-header">
        <div>
          <h2 class="stream-title" id="streamTitle">Live Stream</h2>
          <div class="live-indicator">
            <i class="fa-solid fa-circle"></i><span>LIVE</span>
          </div>
        </div>
        <button class="close-btn" onclick="closeModal('streamModal')">×</button>
      </div>
      
      <div class="stream-content-wrapper">
        <div class="video-section">
          <div class="video-container" id="videoContainer">
            <iframe id="streamFrame" width="100%" height="100%" frameborder="0" allowfullscreen style="display: none;"></iframe>
            <div class="video-placeholder" id="videoPlaceholder">
              <i class="fa-solid fa-play-circle"></i>
              <p>Loading live stream...</p>
            </div>
          </div>
          
          <div class="stream-controls">
            <button class="stream-btn active" onclick="setStreamQuality('hd')">
              <i class="fa-solid fa-tv"></i> HD
            </button>
            <button class="stream-btn" onclick="setStreamQuality('sd')">
              <i class="fa-solid fa-mobile-screen"></i> SD
            </button>
            <button class="stream-btn" onclick="toggleFullscreen()">
              <i class="fa-solid fa-expand"></i> Fullscreen
            </button>
            <button class="stream-btn" onclick="toggleMute()" id="muteBtn">
              <i class="fa-solid fa-volume-up" id="muteIcon"></i> Audio
            </button>
          </div>
          
          <div class="stream-info">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div class="viewer-count">
                <i class="fa-solid fa-eye"></i>
                <span id="viewerCount">12,547</span> viewers
              </div>
              <div style="color: #4CAF50;">
                <i class="fa-solid fa-signal"></i> Excellent connection
              </div>
            </div>
          </div>
        </div>
        
        <!-- CHAT SECTION -->
        <div class="chat-section">
          <div class="chat-header">
            <h3><i class="fa-solid fa-comments"></i> Live Chat</h3>
            <button class="tip-btn" onclick="openTipModal()">
              <i class="fa-solid fa-dollar-sign"></i> Tip
            </button>
          </div>
          <div class="chat-messages" id="chatMessages"></div>
          <div class="chat-input-wrapper">
            <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..." maxlength="200">
            <button class="send-btn" onclick="sendMessage()">
              <i class="fa-solid fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tip Modal -->
  <div class="modal" id="tipModal">
    <div class="tip-modal-content">
      <div class="modal-header">
        <h2 class="modal-title"><i class="fa-solid fa-gift"></i> Send a Tip</h2>
        <button class="close-btn" onclick="closeModal('tipModal')">×</button>
      </div>
      <div class="tip-amounts">
        <button class="tip-amount-btn" onclick="selectTipAmount(5)">
          <i class="fa-solid fa-dollar-sign"></i> $5
        </button>
        <button class="tip-amount-btn" onclick="selectTipAmount(10)">
          <i class="fa-solid fa-dollar-sign"></i> $10
        </button>
        <button class="tip-amount-btn" onclick="selectTipAmount(20)">
          <i class="fa-solid fa-dollar-sign"></i> $20
        </button>
        <button class="tip-amount-btn" onclick="selectTipAmount(50)">
          <i class="fa-solid fa-dollar-sign"></i> $50
        </button>
        <button class="tip-amount-btn" onclick="selectTipAmount(100)">
          <i class="fa-solid fa-dollar-sign"></i> $100
        </button>
      </div>
      <div class="form-group">
        <label class="form-label">Custom Amount ($)</label>
        <input type="number" class="form-input" id="customTipAmount" placeholder="Enter custom amount" min="1">
      </div>
      <div class="form-group">
        <label class="form-label">Message (Optional)</label>
        <textarea class="form-input" id="tipMessage" placeholder="Add a message with your tip..." rows="3" maxlength="150"></textarea>
      </div>
      <div class="selected-tip" id="selectedTip">
        <i class="fa-solid fa-check-circle"></i>
        <span>Selected: $<span id="selectedTipAmount">0</span></span>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn-secondary" onclick="closeModal('tipModal')">Cancel</button>
        <button type="button" class="btn-primary" onclick="sendTip()">
          <i class="fa-solid fa-heart"></i> Send Tip
        </button>
      </div>
    </div>
  </div>

  <script>
    // Global Variables
    let selectedFile = null;
    let isUploading = false;
    let streamQuality = 'hd';
    let isMuted = false;
    let chatMessages = [];
    let selectedTipAmount = 0;
    let chatInterval = null;
    let totalTipsReceived = 0;

    const demoUsernames = ['FootballFan23', 'GoalKeeper99', 'SoccerPro', 'MatchWatcher', 'TeamPlayer', 'StrikerKing', 'DefenseExpert', 'MidfieldMaster', 'TacticsGenius', 'GameAnalyst', 'SportsFanatic', 'UltimateSupporter', 'Ronaldo_Fan', 'MessiLover', 'ChampionsLeague', 'EPL_Watcher'];
    
    const demoChatMessages = [
      'Amazing game so far! 🔥', 
      'That was an incredible goal!', 
      'Defense looking strong today', 
      'What a save by the goalkeeper!', 
      'This match is intense!', 
      'Great teamwork on display', 
      'Can\'t believe that pass!', 
      'Best match of the season', 
      'The atmosphere is electric!', 
      'Brilliant strategy by the coach',
      'Who else is loving this? ⚽',
      'That skill move was insane!',
      'This is why I love football!',
      'Going to be a close finish',
      'Quality football right here'
    ];

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      setupFileUpload();
      setupFormHandlers();
      
      // Custom tip amount handler
      const customInput = document.getElementById('customTipAmount');
      if (customInput) {
        customInput.addEventListener('input', function() {
          const value = parseInt(this.value) || 0;
          if (value > 0) {
            selectedTipAmount = value;
            document.querySelectorAll('.tip-amount-btn').forEach(btn => btn.classList.remove('selected'));
            document.getElementById('selectedTipAmount').textContent = value;
            document.getElementById('selectedTip').style.display = 'flex';
          }
        });
      }
    });

    // ==== MODAL FUNCTIONS ====
    function openUploadModal() {
      document.getElementById('uploadModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
      document.body.style.overflow = 'auto';
      
      if (modalId === 'uploadModal') {
        resetUploadForm();
      }
      
      if (modalId === 'streamModal') {
        // Stop chat simulation
        if (chatInterval) {
          clearInterval(chatInterval);
          chatInterval = null;
        }
        if (window.viewerInterval) {
          clearInterval(window.viewerInterval);
          window.viewerInterval = null;
        }
        // Clear iframe
        document.getElementById('streamFrame').src = '';
      }
      
      if (modalId === 'tipModal') {
        resetTipForm();
      }
    }

    // ==== UPLOAD FUNCTIONS ====
    function resetUploadForm() {
      document.getElementById('uploadForm').reset();
      selectedFile = null;
      resetFileUploadArea();
      hideProgress();
    }

    function resetFileUploadArea() {
      const uploadArea = document.getElementById('fileUploadArea');
      uploadArea.innerHTML = `
        <div class="upload-icon"><i class="fa-solid fa-video"></i></div>
        <div class="upload-text">Drop your video file here or click to select</div>
        <div class="upload-subtext">MP4, AVI, MOV up to 500MB</div>
        <input type="file" id="videoFileInput" class="file-input" accept="video/*">
      `;
      setupFileUpload();
    }

    function hideProgress() {
      document.getElementById('progressBar').style.display = 'none';
      document.getElementById('uploadStatus').style.display = 'none';
    }

    function setupFileUpload() {
      const uploadArea = document.getElementById('fileUploadArea');
      const fileInput = document.getElementById('videoFileInput');
      if (!uploadArea || !fileInput) return;

      uploadArea.addEventListener('click', () => fileInput.click());
      
      uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        e.currentTarget.classList.add('dragover');
      });
      
      uploadArea.addEventListener('dragleave', (e) => {
        e.preventDefault();
        e.currentTarget.classList.remove('dragover');
      });
      
      uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        e.currentTarget.classList.remove('dragover');
        if (e.dataTransfer.files.length > 0) {
          processFile(e.dataTransfer.files[0]);
        }
      });
      
      fileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
          processFile(e.target.files[0]);
        }
      });
    }

    function processFile(file) {
      const maxSize = 500 * 1024 * 1024; // 500MB
      
      if (file.size > maxSize) {
        showToast('File too large! Maximum size is 500MB', 'error');
        return;
      }
      
      if (!file.type.startsWith('video/')) {
        showToast('Please select a valid video file', 'error');
        return;
      }
      
      selectedFile = file;
      showSelectedFile(file);
    }

    function showSelectedFile(file) {
      document.getElementById('fileUploadArea').innerHTML = `
        <div class="selected-file">
          <i class="fa-solid fa-check-circle"></i>
          <div><strong>${file.name}</strong></div>
          <div style="font-size: 12px; margin-top: 5px;">${(file.size / (1024*1024)).toFixed(2)} MB</div>
        </div>
      `;
    }

    function setupFormHandlers() {
      const uploadForm = document.getElementById('uploadForm');
      if (uploadForm) {
        uploadForm.addEventListener('submit', (e) => {
          e.preventDefault();
          if (isUploading) return;
          
          const title = document.getElementById('videoTitle').value;
          const category = document.getElementById('videoCategory').value;
          
          if (!title || !category || !selectedFile) {
            showToast('Please fill in all required fields and select a file', 'error');
            return;
          }
          
          simulateUpload();
        });
      }
    }

    function simulateUpload() {
      isUploading = true;
      const uploadBtn = document.getElementById('uploadBtn');
      const progressBar = document.getElementById('progressBar');
      const progressFill = document.getElementById('progressFill');
      const uploadStatus = document.getElementById('uploadStatus');
      
      uploadBtn.disabled = true;
      uploadBtn.textContent = 'Uploading...';
      progressBar.style.display = 'block';
      uploadStatus.style.display = 'block';
      uploadStatus.textContent = 'Preparing upload...';
      
      let progress = 0;
      const interval = setInterval(() => {
        progress += Math.random() * 15;
        if (progress >= 100) {
          progress = 100;
          clearInterval(interval);
          uploadComplete();
        }
        progressFill.style.width = progress + '%';
        uploadStatus.textContent = `Uploading... ${Math.round(progress)}%`;
      }, 200);
    }

    function uploadComplete() {
      const uploadStatus = document.getElementById('uploadStatus');
      uploadStatus.textContent = 'Upload completed successfully!';
      uploadStatus.style.color = '#4CAF50';
      
      setTimeout(() => {
        showToast('Video uploaded successfully!', 'success');
        closeModal('uploadModal');
      }, 1000);
      
      isUploading = false;
      document.getElementById('uploadBtn').disabled = false;
      document.getElementById('uploadBtn').textContent = 'Upload Video';
    }

    // ==== LIVE STREAM FUNCTIONS ====
    function openLiveStream(eventName) {
      document.getElementById('streamModal').classList.add('active');
      document.getElementById('streamTitle').textContent = eventName;
      document.body.style.overflow = 'hidden';
      
      // Initialize chat
      initializeChat();
      
      // Load stream after delay
      setTimeout(() => loadStream(), 1500);
      
      // Start viewer count updates
      updateViewerCount();
    }

    function loadStream() {
      const placeholder = document.getElementById('videoPlaceholder');
      const frame = document.getElementById('streamFrame');
      
      // Load a sample YouTube live stream (you can replace with actual stream URL)
      frame.src = 'https://www.youtube.com/embed/H_IDhgKNsbQ?autoplay=1&mute=1';
      
      placeholder.style.display = 'none';
      frame.style.display = 'block';
    }

    function updateViewerCount() {
      const viewerCountElement = document.getElementById('viewerCount');
      let count = 12547;
      
      window.viewerInterval = setInterval(() => {
        // Randomly increase/decrease viewer count
        count += Math.floor(Math.random() * 20) - 5;
        if (count < 1000) count = 1000;
        viewerCountElement.textContent = count.toLocaleString();
      }, 3000);
    }

    function setStreamQuality(quality) {
      streamQuality = quality;
      document.querySelectorAll('.stream-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.closest('.stream-btn').classList.add('active');
      showToast(`Stream quality set to ${quality.toUpperCase()}`, 'success');
    }

    function toggleFullscreen() {
      const container = document.getElementById('videoContainer');
      
      if (!document.fullscreenElement) {
        container.requestFullscreen().catch(err => {
          showToast('Fullscreen not supported', 'error');
        });
      } else {
        document.exitFullscreen();
      }
    }

    function toggleMute() {
      isMuted = !isMuted;
      const muteIcon = document.getElementById('muteIcon');
      
      if (isMuted) {
        muteIcon.className = 'fa-solid fa-volume-xmark';
      } else {
        muteIcon.className = 'fa-solid fa-volume-up';
      }
    }

    // ==== CHAT FUNCTIONS ====
    function initializeChat() {
      const chatContainer = document.getElementById('chatMessages');
      chatContainer.innerHTML = '';
      chatMessages = [];
      totalTipsReceived = 0;
      
      // Add welcome message
      addSystemMessage('Welcome to the live chat! Be respectful and enjoy the stream.');
      
      // Start automatic demo chat messages
      startDemoChat();
      
      // Setup enter key for sending messages
      const chatInput = document.getElementById('chatInput');
      chatInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
    }

    function startDemoChat() {
      if (chatInterval) clearInterval(chatInterval);
      
      // Send demo messages at random intervals
      chatInterval = setInterval(() => {
        const username = demoUsernames[Math.floor(Math.random() * demoUsernames.length)];
        const message = demoChatMessages[Math.floor(Math.random() * demoChatMessages.length)];
        addChatMessage(username, message, false);
        
        // Occasionally send a tip
        if (Math.random() < 0.15) { // 15% chance
          setTimeout(() => {
            const tipUser = demoUsernames[Math.floor(Math.random() * demoUsernames.length)];
            const tipAmount = [5, 10, 20, 50][Math.floor(Math.random() * 4)];
            const tipMessages = ['Great stream!', 'Keep it up!', 'Amazing content!', 'Love this!', ''];
            const tipMsg = tipMessages[Math.floor(Math.random() * tipMessages.length)];
            addTipMessage(tipUser, tipAmount, tipMsg);
          }, 2000);
        }
      }, 5000 + Math.random() * 5000); // 5-10 seconds
    }

    function sendMessage() {
      const input = document.getElementById('chatInput');
      const message = input.value.trim();
      
      if (!message) return;
      
      // Add user's message
      addChatMessage('You', message, true);
      input.value = '';
      
      // Simulate responses from other users
      setTimeout(() => {
        const username = demoUsernames[Math.floor(Math.random() * demoUsernames.length)];
        const responses = [
          'Great point!', 
          'I agree!', 
          'Totally!', 
          'Well said!', 
          'Exactly what I was thinking!',
          '👍',
          'Facts!',
          'So true!'
        ];
        addChatMessage(username, responses[Math.floor(Math.random() * responses.length)], false);
      }, 2000 + Math.random() * 3000);
    }

    function addChatMessage(username, message, isCurrentUser) {
      const chatContainer = document.getElementById('chatMessages');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'chat-message';
      
      messageDiv.innerHTML = `
        <div class="chat-username">
          <span>${username}</span>
          ${isCurrentUser ? '<span class="badge">YOU</span>' : ''}
        </div>
        <div class="chat-text">${escapeHtml(message)}</div>
        <div class="chat-timestamp">${getCurrentTime()}</div>
      `;
      
      chatContainer.appendChild(messageDiv);
      
      // Keep only last 50 messages
      while (chatContainer.children.length > 50) {
        chatContainer.removeChild(chatContainer.firstChild);
      }
      
      // Auto scroll to bottom
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function addSystemMessage(message) {
      const chatContainer = document.getElementById('chatMessages');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'chat-message system-message';
      
      messageDiv.innerHTML = `<div class="chat-text">${message}</div>`;
      
      chatContainer.appendChild(messageDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function addTipMessage(username, amount, message) {
      const chatContainer = document.getElementById('chatMessages');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'chat-message tip-message';
      
      totalTipsReceived += amount;
      
      messageDiv.innerHTML = `
        <div class="chat-username">
          <span>${username}</span>
          <span class="tip-badge"><i class="fa-solid fa-gift"></i> ${amount}</span>
        </div>
        <div class="chat-text"><strong>Sent a tip!</strong> ${message ? '💬 ' + escapeHtml(message) : ''}</div>
        <div class="chat-timestamp">${getCurrentTime()}</div>
      `;
      
      chatContainer.appendChild(messageDiv);
      
      // Keep only last 50 messages
      while (chatContainer.children.length > 50) {
        chatContainer.removeChild(chatContainer.firstChild);
      }
      
      chatContainer.scrollTop = chatContainer.scrollHeight;
      
      // Show celebration animation
      showTipCelebration(amount);
    }

    function showTipCelebration(amount) {
      // Add visual feedback for tips
      const celebration = document.createElement('div');
      celebration.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #FFD700, #FFA500);
        color: #000;
        padding: 30px 50px;
        border-radius: 20px;
        font-size: 36px;
        font-weight: 700;
        z-index: 10000;
        box-shadow: 0 10px 40px rgba(255, 215, 0, 0.5);
        animation: tipPop 2s ease forwards;
      `;
      celebration.innerHTML = `<i class="fa-solid fa-gift"></i> ${amount}`;
      
      document.body.appendChild(celebration);
      
      setTimeout(() => {
        celebration.remove();
      }, 2000);
    }

    // Add CSS animation for tip celebration
    const style = document.createElement('style');
    style.textContent = `
      @keyframes tipPop {
        0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
        50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
        100% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
      }
    `;
    document.head.appendChild(style);

    function getCurrentTime() {
      const now = new Date();
      return now.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: true 
      });
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // ==== TIP FUNCTIONS ====
    function openTipModal() {
      document.getElementById('tipModal').classList.add('active');
      resetTipForm();
    }

    function resetTipForm() {
      selectedTipAmount = 0;
      document.getElementById('customTipAmount').value = '';
      document.getElementById('tipMessage').value = '';
      document.getElementById('selectedTip').style.display = 'none';
      document.querySelectorAll('.tip-amount-btn').forEach(btn => {
        btn.classList.remove('selected');
      });
    }

    function selectTipAmount(amount) {
      selectedTipAmount = amount;
      
      // Update UI
      document.querySelectorAll('.tip-amount-btn').forEach(btn => {
        btn.classList.remove('selected');
      });
      event.target.closest('.tip-amount-btn').classList.add('selected');
      
      // Clear custom amount
      document.getElementById('customTipAmount').value = '';
      
      // Show selected amount
      document.getElementById('selectedTipAmount').textContent = amount;
      document.getElementById('selectedTip').style.display = 'flex';
    }

    function sendTip() {
      if (selectedTipAmount <= 0) {
        showToast('Please select a tip amount', 'error');
        return;
      }
      
      const message = document.getElementById('tipMessage').value.trim();
      
      // Add tip to chat
      addTipMessage('You', selectedTipAmount, message);
      
      // Show success message
      showToast(`Tip of ${selectedTipAmount} sent successfully! 🎉`, 'success');
      
      // Close modal
      closeModal('tipModal');
      
      // Add system message
      setTimeout(() => {
        addSystemMessage(`You tipped ${selectedTipAmount}! Thank you for your support! ❤️`);
      }, 500);
    }

    // ==== EVENT FUNCTIONS ====
    function buyTicket(eventName) {
      showToast(`Redirecting to ticket purchase for ${eventName}...`, 'success');
      // In a real app, this would redirect to a payment page
    }

    function shareEvent(eventName) {
      // Simulate sharing
      if (navigator.share) {
        navigator.share({
          title: eventName,
          text: `Check out this amazing event: ${eventName}`,
          url: window.location.href
        }).catch(() => {
          copyToClipboard(window.location.href);
          showToast('Link copied to clipboard!', 'success');
        });
      } else {
        copyToClipboard(window.location.href);
        showToast('Link copied to clipboard!', 'success');
      }
    }

    function setReminder(eventName) {
      showToast(`Reminder set for ${eventName}! 🔔`, 'success');
      // In a real app, this would set up notifications
    }

    function showNotifications() {
      showToast('You have 3 new notifications', 'success');
      // In a real app, this would open a notifications panel
    }

    function copyToClipboard(text) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
    }

    // ==== TOAST NOTIFICATION ====
    function showToast(message, type = 'success') {
      // Remove existing toast if any
      const existingToast = document.querySelector('.toast');
      if (existingToast) {
        existingToast.remove();
      }
      
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <i class="fa-solid fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
        <span>${message}</span>
      `;
      
      document.body.appendChild(toast);
      
      // Trigger animation
      setTimeout(() => toast.classList.add('show'), 10);
      
      // Remove after 3 seconds
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Close modals when clicking outside
    window.addEventListener('click', function(e) {
      if (e.target.classList.contains('modal')) {
        const modalId = e.target.id;
        if (modalId) {
          closeModal(modalId);
        }
      }
    });
  </script>
</body>
</html>
